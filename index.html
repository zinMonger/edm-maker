<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎵 EDM Beep Maker - Alan Walker Style</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="visualizer" id="visualizer"></div>
    <div class="recording-indicator" id="recordingIndicator">● REC</div>

    <div class="app-layout">
        <!-- 왼쪽 사이드바 - SNS 공유 -->
        <aside class="left-sidebar">
            <div class="share-section">
                <h2>📤 SNS 공유</h2>
                <p class="share-info">음악을 세상과 공유하세요!</p>

                <div class="share-controls">
                    <button class="btn share-btn" id="downloadAudioBtn">
                        🎵<br>오디오<br>다운로드
                    </button>
                    <button class="btn share-btn" id="captureSheetBtn">
                        📸<br>악보<br>캡처
                    </button>
                    <button class="btn share-btn" id="shareBtn">
                        🔗<br>공유하기
                    </button>
                    <button class="btn share-btn" id="debugBtn" style="background: #9c27b0;">
                        🐛<br>디버그
                    </button>
                </div>

                <div class="share-status" id="shareStatus"></div>
            </div>
        </aside>

    <!-- 공유 URL 모달 -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <h2>🔗 공유 링크 생성 완료!</h2>
            <p style="color: white; margin-bottom: 15px;">아래 링크를 복사하거나 새 창에서 열어보세요.</p>

            <div class="url-container">
                <input type="text" id="shareUrlInput" readonly />
            </div>

            <div class="modal-buttons">
                <button class="modal-btn primary" id="copyUrlBtn">
                    📋 URL 복사
                </button>
                <button class="modal-btn success" id="openNewTabBtn">
                    🔗 새 창에서 열기
                </button>
                <button class="modal-btn" id="closeModalBtn">
                    닫기
                </button>
            </div>

            <div id="copyStatus" class="copy-status"></div>
        </div>
    </div>

        <!-- 중앙 메인 컨텐츠 -->
        <div class="container">
        <h1>🎵 EDM Beep Maker</h1>
        <div class="info">
            키보드를 눌러서 비트를 만들어보세요!<br>
        </div>

        
        <div class="controls">
            <button class="btn" id="recordBtn">⏺ 녹음</button>
            <button class="btn" id="playBtn">▶ 재생</button>
            <button class="btn" id="bgmBtn">🎼 배경음악 ON/OFF</button>
            <button class="btn" id="clearBtn">🗑️ 악보 지우기</button>
        </div>

        <!-- 악보 섹션 -->
        <div class="sheet-music-section">ㅂㅈㄷ
            <h2>🎼 실시간 악보</h2>
            <div class="staff">
                <div class="staff-lines">
                    <div class="treble-clef">𝄞</div>
                    <div class="staff-line"></div>
                    <div class="staff-line"></div>
                    <div class="staff-line"></div>
                    <div class="staff-line"></div>
                    <div class="staff-line"></div>
                    <div class="notes-container"></div>
                </div>
            </div>
            <!-- <p style="color: #666; font-size: 0.9em; margin-top: 10px;">
                키를 누르면 악보에 음표가 실시간으로 표시됩니다!
            </p> -->
        </div>

        <div class="keyboard">
                 <div class="key" data-key="q" data-note="C">
                Q
                <div class="note-label">C</div>
            </div>
            <div class="key" data-key="w" data-note="D">
                W
                <div class="note-label">D</div>
            </div>
            <div class="key" data-key="e" data-note="E">
                E
                <div class="note-label">E</div>
            </div>
            <div class="key" data-key="r" data-note="F">
                R
                <div class="note-label">F</div>
            </div>
                 <div class="key" data-key="a" data-note="G">
                A
                <div class="note-label">G</div>
            </div> 
            <div class="key" data-key="s" data-note="A">
                S
                <div class="note-label">A</div>
            </div>
            <div class="key" data-key="d" data-note="B">
                D
                <div class="note-label">B</div>
            </div>
            <div class="key" data-key="f" data-note="C2"> 
                F
                <div class="note-label">C2</div>
            </div>
           
        </div>

    </div>

        <!-- 오른쪽 사이드바 - 루프 레이어 -->
        <aside class="right-sidebar">
            <div class="loop-section">
                <h2>🔁 루프 레이어</h2>
                <p class="loop-info">4초 동안 녹음되며 자동으로 반복됩니다. 여러 레이어를 쌓아보세요!</p>

                <div class="loop-controls">
                    <button class="btn loop-btn" id="loopRecBtn">🔴 루프 녹음</button>
                    <button class="btn" id="clearLayersBtn">🗑️ 모든 레이어 삭제</button>
                </div>

                <div class="loop-layers" id="loopLayers">
                    <!-- 레이어들이 여기에 추가됩니다 -->
                </div>
            </div>
        </aside>
    </div>

    <!-- 모듈 로드 (순서 중요!) -->
    <script src="js/constants.js"></script>
    <script src="js/audio-context.js"></script>
    <script src="js/synth.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
